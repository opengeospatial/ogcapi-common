[[overview]]
== Overview

This OGC API - Common - Part 2: Geospatial Data Standard provides a way to list and describe available collections of spatiotemporal data.
Web APIs specifying mechanisms to access data are defined in separate OGC API Standards.
This Standard depends on the Core requirements class of OGC API - Common - Part 1: Core which specifies fundamental requirements for OGC Web APIs based on HTTP.
Implementations may also conform to the Landing Page requirements class of Part 1 which specifies additional requirements for the landing page (root of the API),
conformance declaration (`/conformance`) and an API definition.

[[collections-introduction]]
=== Collections

Spatiotemporal data is rarely considered as a single entity, but as aggregations, or _collections_, of <<spatial-thing-definition,Spatio>>-<<temporal-thing-definition,Temporal>> things.

While _collection_ is a common term, its specific meaning is often based on the context in which it is used. Given the focus on addressing geospatial data, a definition that reflects the unique characteristics
of geospatial data collections is needed.
Therefore, **for purposes of this standard** and in the context of OGC APIs, the term <<collection-definition,Collection>> refers to a set of spatiotemporal data that may be available through one or more
access mechanisms defined by OGC API standard(s).

The purpose of the OGC API - Common - Part 2: Geospatial Data Standard is to list and describe the available geospatial data collections.

OGC Web API Standards could extend this definition to address the specific properties of the resources they describe.

[[access-mechanisms]]
=== Data access mechanisms

A collection of geospatial data may be accessed in more than one way.
Some examples of data access mechanisms are:

* a feature-centric approach allowing to access individual features by their identifiers,
* providing access to a subset of geospatial information for an arbitrary area, time and resolution of interest,
* provide access to data for pre-determined partitions of space using tiles or discrete global grid zones.

To illustrate a particular use case, a collection of data for land cover classification may be available either as individual features where one multi-polygon feature corresponds to low vegetation,
another feature corresponds to trees and yet another feature corresponds to the built-up area.
In an implementation of the OGC API - Features Standard, each of these features may be individually accessible at:

`/collections/landcover/items/{itemId}`.

The API deployment may also include an implementation of the access mechanism defined by the OGC API - Coverages Standard for the same classified land cover collection enabling retrieval of a subset for a given spatial area using:

`/collections/landcover/coverage?subset=Lat(10:20),Lon(30:40)`.

The OGC API - Common - Part 2: Geospatial Data Standard describes data collections, but does not define any _access mechanisms_ to the data.
Access mechanisms are defined in separate OGC Web API Standards.

The _access mechanisms_ are defined by the resource paths which are specified in the different OGC API Standards.
The resources associated with a particular _access mechanism_ for a specific collection will be under the collection resource:

`/collections/{collectionId}/{accessResources}`

where:

* `{collectionId}` is an identifier for the collection
* `{accessResources}` are resources defined for accessing data using a particular mechanism.

IMPORTANT: Editors of OGC API Standards and implementers of Web APIs will carefully avoid redefining different resources with the same path in different OGC API Standards and implementations,
so that API deployments can offer multiple data access mechanisms for the same collections.

TIP: The available data access mechanisms supported for a specific collection are typically advertised by including links using specific link relation types defined
by the various OGC API Standards in the `links` array of the collection description.

_Access mechanisms_ should not be confused with _representations_.

[[representation]]
=== Representation

Data access mechanisms may support one or more representation (data formats / encodings) for each resource they define.
A representation is typically negotiated between the server and client using HTTP content negotiation (the `Accept:` request header).
In the land cover example above, the client could request either individual features or a feature collection as GeoJSON (`Accept: application/geo+json`) or as GeoPackage (`Accept: application/geopackage+sqlite3`),
and the coverage request could be requested as GeoTIFF (`Accept: image/tiff; application=geotiff`) or also as GeoPackage (`application/geopackage+sqlite3`) leveraging the https://docs.ogc.org/is/17-066r2/17-066r2.html[GeoPackage Extension for Tiled Gridded Coverage Data].
Alternative formats supported by both the server and client could also be negotiated successfully.

Some media types for encodings such as JSON are very generic. When no suitable media type has been registered for a representation using a specific schema, a mechanism to negotiate a particular
profile may also be used for example using a `profile` query parameter or an `Accept-Profile:` request header as described in the https://www.w3.org/TR/dx-prof-conneg/[W3C Content Negotiation by Profile Working Draft],
in combination with the regular HTTP content negotiation headers. The concept of profile may also be used to control other aspects of the representation besides the schema.

=== UML Class Diagram
The following UML class diagram represents the model of common resources offered by Web APIs implementing one or more OGC API Standards.
In particular, the diagram describes the resources presented in OGC API Common - Part 1: the Landing page (_LandingPage_ class), the conformance page (_ConformanceClasses_) and the exception report (_Exception_).
The diagram also describes the two resources specified in this Part 2: the collections page (_Collections_) and the collection description (_CollectionDescription_), as well as its associated classes.
While these common resources are precisely described in the requirements to follow, they are presented here as a UML diagram for convenience.
The transformation of this UML diagram into a list of tables, one for each class, can be found in <<annex-uml-tables>>.
In case of discrepancy between this UML diagram, the UML tables, and the text of the requirements, the requirements should be considered correct.

[[conceptual-model]]
[#img_uml_model='{figure-caption} {counter:figure-num}']
.UML class diagram describing the common resources
image::xmi-images/EAID_1D4EEC35_FEDC_4ab6_A5CD_C6E4081F5F3F.png[width=700,align="center"]

IMPORTANT: While the UML class model attributes use the singular for elements with multiplicity, the JSON encoding and schema use the plural versions, as seen in the table in the next section.

=== Collection Description Properties

The following table lists all properties defined as part of the collection description.
Note that only the `id` and `links` are mandatory. The `"rel": "self"` link is the only mandatory link, and usually at least one link tied to a specific data access mechanism
(e.g., `"rel": "items"` or `"rel": "[ogc-rel:map]"`) should be included.
This set of properties is neither a minimal subset, nor a comprehensive union of all properties defined by all OGC API Standards,
but a list of all properties identified as being in use by two or more OGC API Standards, without being tied to any particular data access mechanism.

Several of the properties originate from the https://docs.ogc.org/is/17-083r4/17-083r4.html#table14[2D Tile Matrix Set and TileSet Metadata], which itself was largely derived from the
https://docs.ogc.org/per/19-082r1.html[Vector Tiles Pilot TileSet Metadata Engineering Report].
Other properties originate from OGC API - Records (https://docs.ogc.org/is/20-004r1/20-004r1.html#core-properties[core records properties]), as a collection can be thought as a record resource
as part of a https://docs.ogc.org/is/20-004r1/20-004r1.html#clause-local-resources-catalog[Local Resource Catalog].

This collection description remains extensible (it does not set `"additionalProperties": false`), and does not preclude the addition of new properties by new OGC API standards.
However, to ensure consistency across the OGC API Standards, new OGC API Standards should consider reusing these properties when their functionality is relevant, and avoid defining
new conflicting properties (with same name but different semantics).

[#collection-description-properties,reftext='{table-caption} {counter:table-num}']
.JSON Collection Description Properties
[cols="1,1,3", options="header"]
|===
| Name (as encoded in JSON) | JSON Type | Definition
| **id**
| String
| **_(required)_** Identifier of the collection (sometimes referred as collectionId). It is used in the Web API as path parameter in `/collections/{collectionId}`

| **title**
| String
| A short, human-readable summary of the collection

| **description**
| String
| A human-readable explanation about data in the collection

| **extent**
| Extent
| The extent where and when data from this collection is available

| **links**
| array of Link
| **_(required)_** Links to this or other resources related to this collection

| **attribution**
| String
| For the collection that can contain markup text whose format may be indicated in the `attributionMediaType` property. That format can be either plain text (`text/plain`), HTML (`text/html`) or CommonMark (`text/markdown`)

| **attributionMediaType**
| AttributionMediaTypeCode
| Media type for the markup language of the attribution: It can be either plain text (`text/plain`), HTML (`text/html`) or CommonMark (`text/markdown`).

| **accessContraints**
| AccessContraintsCode (`unclassified`, `restricted`, `confidential`, `secret`, `topSecret`)
| Restrictions on the availability of the collection that the user needs to be aware of before using or redistributing the data.

| **parent**
| String
| An `id` of a collection that is the parent of this collection in a hierarchical relation. For example a riversâ€™ collection can have an topographic collection as parent.

| **publisher**
| String
| Organization or individual responsible for making the data available

| **contacts**
| array of Contact
| A list of contacts qualified by their role(s) in association to the collection

| **license**
| String
| The legal provisions under which the data of this collection is made available

| **resourceLanguages**
| array of ResourceLanguage
| The list of languages in which the data of this collection is available.

| **rights**
| String
| A statement that concerns all rights not addressed by the license such as a copyright statement

| **keywords**
| String
| The topic or topics of the resource. Typically represented using free-form keywords, tags, key phrases, or classification codes

| **themes**
| array of Theme
| A knowledge organization system used to classify the resource

| **itemType**
| String
| Indicator about the type of the items in the collection if the collection has an accessible `/collections/{collectionId}/items` endpoint (e.g., `feature` or `record`)

| **dataType**
| String
| Nature of the data in the collection. For example, this could be set to `map`, `vector` or `coverage`. It is not an indication of the available data access mechanism, but a hint regarding the internal representation of the data.

| **formats**
| array of Format
| A list of formats in which the data of this collection is distributed

| **geoDataClasses**
| array of URI
| One or more classes of geospatial data, identified by a URI, which implies compatibility with a particular schema (fields/properties, as defined in OGC API - Common - Part 3: Schemas) for one or more collections, each with particular semantic definitions and data types. This is useful for example to determine compatibility with styles or processes, or to identify a particular collection within a dataset based on semantics.

| **defaultFields**
| array of String
| A sorted list of field names. For a features data access mechanism , it is the list of returnable properties included by default and complementing the geometry of the features. For a coverage data access mechanism, they are names of fields whose values are included by default. Note that an API may provide a mechanism (e.g., a query parameter called `properties` or `exclude-properties`) to override this default list in customized responses.

| **crs**
| array of String (URI, CURIE or WKT2CRS) or objects (PROJJSON or CRS JSON)
| The list of coordinate reference systems supported by the API; if present, the list should include the default coordinate reference system (usually listed first). Each item should be a URI to a registered CRS if one is available, or a full description of the CRS otherwise using e.g., a WKT2CRS string, or a PROJJSON, or CRS JSON object.

| **storageCrs**
| String (URI, CURIE or WKT2CRS) or object (PROJJSON or CRS JSON)
| The native coordinate reference system (i.e., the most efficient CRS in which to request the data, possibly how the data is stored on the server); this is the default output coordinate reference system for Maps and Coverages. This should be a URI to a registered CRS if one is available, or a full description of the CRS otherwise using e.g., a WKT2CRS string, or a PROJJSON, or CRS JSON object.

| **epoch**
| Real
| Epoch of the native (storage) Coordinate Reference System (CRS)

| **geometryDimension**
| Integer
| Number of spatial dimensions of the primary geometry of individual elements of the data: 0 for points, 1 for curves, 2 for surfaces, 3 for solids and unspecified when mixed or unknown. Not to be confused with the dimensions of the domain which are defined by the `extent` element.

| **minScaleDenominator**
| Real
| Minimum scale denominator for usage of the collection

| **maxScaleDenominator**
| Real
| Maximum scale denominator for usage of the collection

| **minCellSize**
| Real
| Minimum cell size for usage of the collection

| **maxCellSize**
| Real
| Maximum cell size for usage of the collection

| **created**
| String (`date-time` format)
| Timestamp indicating when the data in the collection was first produced

| **updated**
| String (`date-time` format)
| Timestamp of the last change/revision to the data in the collection
|===

NOTE: Refer to <<annex-uml-tables,Annex B>> for the full model class tables describing the custom data types of these properties.
